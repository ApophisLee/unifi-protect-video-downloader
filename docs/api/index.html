
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen-a1ce949a.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-bccf8c07.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-c5541673.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-1e815a84.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#user-authentication" class="toc-h2 toc-link" data-title="User Authentication">User Authentication</a>
                  </li>
                  <li>
                    <a href="#api-access-key" class="toc-h2 toc-link" data-title="API Access Key">API Access Key</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://github.com/slatedocs/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>The <em>incomplete and unofficial</em> documentation of the UniFi Protect API.</p>

<p>This API documentation page was created with <a href="https://github.com/slatedocs/slate">Slate</a>.</p>
<h1 id='authentication'>Authentication</h1><h2 id='user-authentication'>User Authentication</h2>
<p>Authenticate with the username and password of a local user to receive an OAuth Bearer Token.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://{cloud-key-address}:7443/api/auth</code></p>
<h3 id='headers'>Headers</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Content-Type</td>
<td>application/json</td>
<td></td>
</tr>
</tbody></table>

<blockquote>
<p>Request Body</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="s2">"username"</span><span class="p">:</span><span class="w"> </span><span class="err">my_username</span><span class="p">,</span><span class="w"> </span><span class="s2">"password"</span><span class="p">:</span><span class="w"> </span><span class="err">my_password</span><span class="p">}</span><span class="w">
</span></code></pre>
<aside class="notice">
You must replace <code>my_username</code> and <code>my_password</code> with the username and password of a local user.
</aside>

<p>If the authentication was successful, you will receive a JSON Response Body containing some general information about your user account.</p>

<aside class="success">
As part of the <b>Response Headers</b> you will receive your <code>Authorization</code> containing an OAuth Bearer Token. This token can be used for all future API calls that require user authentication.
</aside>

<blockquote>
<p>Example Response Body for <code>200 OK</code></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"permissions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"user:read,write,delete:$"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"liveview:create"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"lastLoginIp"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lastLoginTime"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"isOwner"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"localUsername"</span><span class="p">:</span><span class="w"> </span><span class="s2">"your_username"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"enableNotifications"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"syncSso"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"settings"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"groups"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"000000000000000000000000"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"cloudAccount"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"alertRules"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"111111111111111111111111"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"hasAcceptedInvite"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"allPermissions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"user:read,write,delete:$"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"liveview:create"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"nvr:read:*"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"camera:read,readmedia:*"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"modelKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Example Response Body for <code>401 Unauthorized</code></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"invalid username or password"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h2 id='api-access-key'>API Access Key</h2>
<p>Use the OAuth Bearer Token to request an API Access Key which is required for API calls that require an <code>accessKey</code> query parameter.</p>

<aside class="notice">
The API Access Key seems to have a limited lifetime and needs to be renewed periodically.
</aside>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>POST https://{cloud-key-address}:7443/api/auth/access-key</code></p>
<h3 id='headers-2'>Headers</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Authorization</td>
<td>Bearer {your_oauth_bearer_token}</td>
<td></td>
</tr>
</tbody></table>

<aside class="notice">
You must replace <code>{your_oauth_bearer_token}</code> with the OAuth Bearer Token from the step above.
</aside>

<blockquote>
<p>Request Body</p>
</blockquote>
<pre class="highlight plaintext"><code>No Request Body content is required for this request.
</code></pre>
<p>If the authentication was successful, you will receive a JSON Response Body containing your API <code>accessKey</code>.</p>

<aside class="success">
As part of the <b>Response Headers</b> you will receive your <code>Authorization</code> containing an OAuth Bearer Token. This token can be used for all future API calls that require user authentication.
</aside>

<blockquote>
<p>Example Response Body for <code>200 OK</code></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"accessKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234567890123:abcdef1234567890abcdef12:1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Example Response Body for <code>401 Unauthorized</code></p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unauthorized"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AuthenticationError"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
